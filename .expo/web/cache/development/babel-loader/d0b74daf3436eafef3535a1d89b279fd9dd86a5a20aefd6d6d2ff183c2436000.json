{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/akerim/cursorProjects/canonCraft/components/SceneScreen.js\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useGame } from \"../gameContext\";\nimport PersonaMeter from \"./PersonaMeter\";\nimport ChoiceButton from \"./ChoiceButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SceneScreen(_ref) {\n  var _this = this,\n    _state$currentStory2,\n    _state$currentStory3;\n  var navigation = _ref.navigation;\n  var _useGame = useGame(),\n    state = _useGame.state,\n    setScene = _useGame.setScene,\n    updatePersonaScore = _useGame.updatePersonaScore,\n    generateNextScene = _useGame.generateNextScene,\n    incrementAdsWatched = _useGame.incrementAdsWatched;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  useEffect(function () {\n    if (!state.currentStory || !state.currentScene) {\n      navigation.navigate('Menu');\n    }\n  }, [state.currentStory, state.currentScene]);\n  var _handleChoice = function () {\n    var _ref2 = _asyncToGenerator(function* (choice) {\n      if (isLoading || state.isGeneratingScene) return;\n      setIsLoading(true);\n      try {\n        if (choice.persona_score) {\n          updatePersonaScore(choice.persona_score);\n        }\n        if (choice.reward_ad) {\n          var watchAd = yield showRewardedAdPrompt();\n          if (watchAd) {\n            incrementAdsWatched();\n          }\n        }\n        if (choice.next_scene === 'end_summary') {\n          navigation.navigate('Summary');\n        } else {\n          var _state$currentStory;\n          if ((_state$currentStory = state.currentStory) != null && _state$currentStory.isAIGenerated) {\n            try {\n              yield generateNextScene(choice);\n            } catch (error) {\n              console.error('Failed to generate next scene:', error);\n              Alert.alert('Connection Error', 'Unable to generate the next scene. Please check your internet connection and try again.', [{\n                text: 'Retry',\n                onPress: function onPress() {\n                  return _handleChoice(choice);\n                }\n              }, {\n                text: 'Return to Menu',\n                onPress: function onPress() {\n                  return navigation.navigate('Menu');\n                }\n              }]);\n              return;\n            }\n          } else {\n            var nextScene = findSceneById(choice.next_scene);\n            if (nextScene) {\n              setScene(nextScene);\n            } else {\n              Alert.alert('Error', 'Scene not found. Returning to menu.');\n              navigation.navigate('Menu');\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Error handling choice:', error);\n        Alert.alert('Error', 'Something went wrong. Please try again.');\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function handleChoice(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var showRewardedAdPrompt = function showRewardedAdPrompt() {\n    return new Promise(function (resolve) {\n      Alert.alert('Watch Ad for Bonus', 'Watch a short video to unlock special content or bonus persona points?', [{\n        text: 'Skip',\n        onPress: function onPress() {\n          return resolve(false);\n        }\n      }, {\n        text: 'Watch Ad',\n        onPress: function onPress() {\n          return resolve(true);\n        }\n      }]);\n    });\n  };\n  if (!state.currentScene) {\n    return _jsxDEV(View, {\n      style: styles.loadingContainer,\n      children: [_jsxDEV(ActivityIndicator, {\n        size: \"large\",\n        color: \"#e85a4f\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.loadingText,\n        children: \"Loading your story...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this);\n  }\n  var scene = state.currentScene;\n  var isGenerating = state.isGeneratingScene || isLoading;\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(StatusBar, {\n      barStyle: \"light-content\",\n      backgroundColor: \"#1a1a2e\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), _jsxDEV(PersonaMeter, {\n      score: state.personaScore\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), _jsxDEV(ScrollView, {\n      style: styles.scrollView,\n      showsVerticalScrollIndicator: false,\n      children: [scene.title && _jsxDEV(View, {\n        style: styles.titleContainer,\n        children: _jsxDEV(Text, {\n          style: styles.sceneTitle,\n          children: scene.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this), _jsxDEV(View, {\n        style: styles.narrationContainer,\n        children: [_jsxDEV(Text, {\n          style: styles.narrationText,\n          children: scene.narration\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), scene.ad && _jsxDEV(View, {\n          style: styles.adContainer,\n          children: [_jsxDEV(Text, {\n            style: styles.adLabel,\n            children: \"Sponsored\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this), _jsxDEV(Text, {\n            style: styles.adText,\n            children: scene.ad\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), isGenerating && _jsxDEV(View, {\n        style: styles.generatingContainer,\n        children: [_jsxDEV(ActivityIndicator, {\n          size: \"large\",\n          color: \"#e85a4f\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          style: styles.generatingText,\n          children: \"AI is crafting your next adventure...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this), !isGenerating && _jsxDEV(View, {\n        style: styles.choicesContainer,\n        children: [_jsxDEV(Text, {\n          style: styles.choicesHeader,\n          children: \"What do you do?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this), scene.choices && scene.choices.map(function (choice, index) {\n          return _jsxDEV(ChoiceButton, {\n            choice: choice,\n            onPress: function onPress() {\n              return _handleChoice(choice);\n            },\n            disabled: isGenerating\n          }, choice.choice_id || index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, _this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this), _jsxDEV(View, {\n        style: styles.characterInfo,\n        children: [_jsxDEV(Text, {\n          style: styles.characterText,\n          children: [\"Playing as \", (_state$currentStory2 = state.currentStory) == null ? void 0 : _state$currentStory2.character]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.progressText,\n          children: [\"Choices made: \", state.totalChoicesMade]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), ((_state$currentStory3 = state.currentStory) == null ? void 0 : _state$currentStory3.isAIGenerated) && _jsxDEV(Text, {\n          style: styles.aiIndicator,\n          children: \"\\uD83E\\uDD16 AI-Generated Story\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#1a1a2e'\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#1a1a2e'\n  },\n  loadingText: {\n    color: '#eee2dc',\n    fontSize: 18,\n    marginTop: 16,\n    textAlign: 'center'\n  },\n  scrollView: {\n    flex: 1\n  },\n  titleContainer: {\n    paddingHorizontal: 20,\n    paddingTop: 20,\n    paddingBottom: 10\n  },\n  sceneTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#eee2dc',\n    textAlign: 'center'\n  },\n  narrationContainer: {\n    paddingHorizontal: 20,\n    paddingVertical: 20\n  },\n  narrationText: {\n    fontSize: 16,\n    lineHeight: 24,\n    color: '#bab2b5',\n    textAlign: 'justify'\n  },\n  adContainer: {\n    marginTop: 20,\n    padding: 15,\n    backgroundColor: '#16213e',\n    borderRadius: 8,\n    borderLeftWidth: 4,\n    borderLeftColor: '#e85a4f'\n  },\n  adLabel: {\n    fontSize: 12,\n    color: '#8b8680',\n    marginBottom: 5,\n    fontWeight: 'bold'\n  },\n  adText: {\n    fontSize: 14,\n    color: '#bab2b5',\n    fontStyle: 'italic'\n  },\n  generatingContainer: {\n    alignItems: 'center',\n    paddingVertical: 40,\n    paddingHorizontal: 20\n  },\n  generatingText: {\n    color: '#bab2b5',\n    fontSize: 16,\n    marginTop: 16,\n    textAlign: 'center',\n    fontStyle: 'italic'\n  },\n  choicesContainer: {\n    paddingHorizontal: 20,\n    paddingBottom: 20\n  },\n  choicesHeader: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#eee2dc',\n    marginBottom: 15,\n    textAlign: 'center'\n  },\n  characterInfo: {\n    paddingHorizontal: 20,\n    paddingBottom: 30,\n    alignItems: 'center',\n    borderTopWidth: 1,\n    borderTopColor: '#16213e',\n    paddingTop: 20,\n    marginTop: 10\n  },\n  characterText: {\n    fontSize: 14,\n    color: '#e85a4f',\n    fontWeight: '600',\n    marginBottom: 5\n  },\n  progressText: {\n    fontSize: 12,\n    color: '#8b8680',\n    marginBottom: 5\n  },\n  aiIndicator: {\n    fontSize: 12,\n    color: '#4CAF50',\n    fontStyle: 'italic'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","ScrollView","TouchableOpacity","Alert","StatusBar","ActivityIndicator","useGame","PersonaMeter","ChoiceButton","jsxDEV","_jsxDEV","SceneScreen","_ref","_this","_state$currentStory2","_state$currentStory3","navigation","_useGame","state","setScene","updatePersonaScore","generateNextScene","incrementAdsWatched","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","currentStory","currentScene","navigate","handleChoice","_ref2","_asyncToGenerator","choice","isGeneratingScene","persona_score","reward_ad","watchAd","showRewardedAdPrompt","next_scene","_state$currentStory","isAIGenerated","error","console","alert","text","onPress","nextScene","findSceneById","_x","apply","arguments","Promise","resolve","style","styles","loadingContainer","children","size","color","fileName","_jsxFileName","lineNumber","columnNumber","loadingText","scene","isGenerating","container","barStyle","backgroundColor","score","personaScore","scrollView","showsVerticalScrollIndicator","title","titleContainer","sceneTitle","narrationContainer","narrationText","narration","ad","adContainer","adLabel","adText","generatingContainer","generatingText","choicesContainer","choicesHeader","choices","map","index","disabled","choice_id","characterInfo","characterText","character","progressText","totalChoicesMade","aiIndicator","create","flex","justifyContent","alignItems","fontSize","marginTop","textAlign","paddingHorizontal","paddingTop","paddingBottom","fontWeight","paddingVertical","lineHeight","padding","borderRadius","borderLeftWidth","borderLeftColor","marginBottom","fontStyle","borderTopWidth","borderTopColor"],"sources":["/Users/akerim/cursorProjects/canonCraft/components/SceneScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  Alert,\n  StatusBar,\n  ActivityIndicator,\n} from 'react-native';\nimport { useGame } from '../gameContext';\nimport PersonaMeter from './PersonaMeter';\nimport ChoiceButton from './ChoiceButton';\n\nexport default function SceneScreen({ navigation }) {\n  const { \n    state, \n    setScene, \n    updatePersonaScore, \n    generateNextScene,\n    incrementAdsWatched \n  } = useGame();\n  \n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    if (!state.currentStory || !state.currentScene) {\n      // If no story is loaded, go back to menu\n      navigation.navigate('Menu');\n    }\n  }, [state.currentStory, state.currentScene]);\n\n  const handleChoice = async (choice) => {\n    if (isLoading || state.isGeneratingScene) return;\n    \n    setIsLoading(true);\n\n    try {\n      // Update persona score\n      if (choice.persona_score) {\n        updatePersonaScore(choice.persona_score);\n      }\n\n      // Handle rewarded ad if specified\n      if (choice.reward_ad) {\n        const watchAd = await showRewardedAdPrompt();\n        if (watchAd) {\n          incrementAdsWatched();\n          // Could unlock special content or bonus points here\n        }\n      }\n\n      // Navigate to next scene\n      if (choice.next_scene === 'end_summary') {\n        navigation.navigate('Summary');\n      } else {\n        // For AI-generated stories, generate the next scene dynamically\n        if (state.currentStory?.isAIGenerated) {\n          try {\n            await generateNextScene(choice);\n          } catch (error) {\n            console.error('Failed to generate next scene:', error);\n            Alert.alert(\n              'Connection Error', \n              'Unable to generate the next scene. Please check your internet connection and try again.',\n              [\n                { text: 'Retry', onPress: () => handleChoice(choice) },\n                { text: 'Return to Menu', onPress: () => navigation.navigate('Menu') }\n              ]\n            );\n            return;\n          }\n        } else {\n          // Legacy: for pre-defined scenes (backward compatibility)\n          const nextScene = findSceneById(choice.next_scene);\n          if (nextScene) {\n            setScene(nextScene);\n          } else {\n            Alert.alert('Error', 'Scene not found. Returning to menu.');\n            navigation.navigate('Menu');\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error handling choice:', error);\n      Alert.alert('Error', 'Something went wrong. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const showRewardedAdPrompt = () => {\n    return new Promise((resolve) => {\n      Alert.alert(\n        'Watch Ad for Bonus',\n        'Watch a short video to unlock special content or bonus persona points?',\n        [\n          { text: 'Skip', onPress: () => resolve(false) },\n          { text: 'Watch Ad', onPress: () => resolve(true) }\n        ]\n      );\n    });\n  };\n\n  if (!state.currentScene) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#e85a4f\" />\n        <Text style={styles.loadingText}>Loading your story...</Text>\n      </View>\n    );\n  }\n\n  const scene = state.currentScene;\n  const isGenerating = state.isGeneratingScene || isLoading;\n\n  return (\n    <View style={styles.container}>\n      <StatusBar barStyle=\"light-content\" backgroundColor=\"#1a1a2e\" />\n      \n      {/* Persona Meter */}\n      <PersonaMeter score={state.personaScore} />\n\n      <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>\n        {/* Scene Title */}\n        {scene.title && (\n          <View style={styles.titleContainer}>\n            <Text style={styles.sceneTitle}>{scene.title}</Text>\n          </View>\n        )}\n\n        {/* Scene Narration */}\n        <View style={styles.narrationContainer}>\n          <Text style={styles.narrationText}>{scene.narration}</Text>\n          \n          {/* Embedded Ad Content */}\n          {scene.ad && (\n            <View style={styles.adContainer}>\n              <Text style={styles.adLabel}>Sponsored</Text>\n              <Text style={styles.adText}>{scene.ad}</Text>\n            </View>\n          )}\n        </View>\n\n        {/* Loading State for AI Generation */}\n        {isGenerating && (\n          <View style={styles.generatingContainer}>\n            <ActivityIndicator size=\"large\" color=\"#e85a4f\" />\n            <Text style={styles.generatingText}>\n              AI is crafting your next adventure...\n            </Text>\n          </View>\n        )}\n\n        {/* Choices */}\n        {!isGenerating && (\n          <View style={styles.choicesContainer}>\n            <Text style={styles.choicesHeader}>What do you do?</Text>\n            {scene.choices && scene.choices.map((choice, index) => (\n              <ChoiceButton\n                key={choice.choice_id || index}\n                choice={choice}\n                onPress={() => handleChoice(choice)}\n                disabled={isGenerating}\n              />\n            ))}\n          </View>\n        )}\n\n        {/* Character Info */}\n        <View style={styles.characterInfo}>\n          <Text style={styles.characterText}>\n            Playing as {state.currentStory?.character}\n          </Text>\n          <Text style={styles.progressText}>\n            Choices made: {state.totalChoicesMade}\n          </Text>\n          {state.currentStory?.isAIGenerated && (\n            <Text style={styles.aiIndicator}>\n              ðŸ¤– AI-Generated Story\n            </Text>\n          )}\n        </View>\n      </ScrollView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#1a1a2e',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#1a1a2e',\n  },\n  loadingText: {\n    color: '#eee2dc',\n    fontSize: 18,\n    marginTop: 16,\n    textAlign: 'center',\n  },\n  scrollView: {\n    flex: 1,\n  },\n  titleContainer: {\n    paddingHorizontal: 20,\n    paddingTop: 20,\n    paddingBottom: 10,\n  },\n  sceneTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#eee2dc',\n    textAlign: 'center',\n  },\n  narrationContainer: {\n    paddingHorizontal: 20,\n    paddingVertical: 20,\n  },\n  narrationText: {\n    fontSize: 16,\n    lineHeight: 24,\n    color: '#bab2b5',\n    textAlign: 'justify',\n  },\n  adContainer: {\n    marginTop: 20,\n    padding: 15,\n    backgroundColor: '#16213e',\n    borderRadius: 8,\n    borderLeftWidth: 4,\n    borderLeftColor: '#e85a4f',\n  },\n  adLabel: {\n    fontSize: 12,\n    color: '#8b8680',\n    marginBottom: 5,\n    fontWeight: 'bold',\n  },\n  adText: {\n    fontSize: 14,\n    color: '#bab2b5',\n    fontStyle: 'italic',\n  },\n  generatingContainer: {\n    alignItems: 'center',\n    paddingVertical: 40,\n    paddingHorizontal: 20,\n  },\n  generatingText: {\n    color: '#bab2b5',\n    fontSize: 16,\n    marginTop: 16,\n    textAlign: 'center',\n    fontStyle: 'italic',\n  },\n  choicesContainer: {\n    paddingHorizontal: 20,\n    paddingBottom: 20,\n  },\n  choicesHeader: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#eee2dc',\n    marginBottom: 15,\n    textAlign: 'center',\n  },\n  characterInfo: {\n    paddingHorizontal: 20,\n    paddingBottom: 30,\n    alignItems: 'center',\n    borderTopWidth: 1,\n    borderTopColor: '#16213e',\n    paddingTop: 20,\n    marginTop: 10,\n  },\n  characterText: {\n    fontSize: 14,\n    color: '#e85a4f',\n    fontWeight: '600',\n    marginBottom: 5,\n  },\n  progressText: {\n    fontSize: 12,\n    color: '#8b8680',\n    marginBottom: 5,\n  },\n  aiIndicator: {\n    fontSize: 12,\n    color: '#4CAF50',\n    fontStyle: 'italic',\n  },\n}); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}